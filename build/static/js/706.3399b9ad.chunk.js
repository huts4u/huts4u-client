"use strict";(self.webpackChunkhuts4u=self.webpackChunkhuts4u||[]).push([[706],{9325:(e,o,r)=>{r.r(o),r.d(o,{default:()=>q});var n=r(9662),t=r(579);const a=(0,n.A)((0,t.jsx)("path",{d:"m12 17.27 4.15 2.51c.76.46 1.69-.22 1.49-1.08l-1.1-4.72 3.67-3.18c.67-.58.31-1.68-.57-1.75l-4.83-.41-1.89-4.46c-.34-.81-1.5-.81-1.84 0L9.19 8.63l-4.83.41c-.88.07-1.24 1.17-.57 1.75l3.67 3.18-1.1 4.72c-.2.86.73 1.54 1.49 1.08z"}),"StarRounded");var i=r(7353),s=r(2110),l=r(6494),d=r(4496),c=r(6591),x=r(9336),u=r(1716),p=r(3580),h=r(788),m=r(3216),f=r(3892),g=r(899),y=r(9995),b=r(7488),j=r(5043),v=r(9007),A=r(1081),w=r(8387),S=r(8610),k=r(4535),C=r(8206),R=r(7034),z=r(2563);const W=(0,k.Ay)(d.A,{name:"MuiDialogTitle",slot:"Root",overridesResolver:(e,o)=>o.root})({padding:"16px 24px",flex:"0 0 auto"}),P=j.forwardRef((function(e,o){const r=(0,C.b)({props:e,name:"MuiDialogTitle"}),{className:n,id:a,...i}=r,s=r,l=(e=>{const{classes:o}=e;return(0,S.A)({root:["root"]},R.t,o)})(s),{titleId:d=a}=j.useContext(z.A);return(0,t.jsx)(W,{component:"h2",className:(0,w.A)(l.root,n),ownerState:s,ref:o,variant:"h6",id:a??d,...i})}));var B=r(5316),D=r(9347),N=r(1906);const I=e=>{let{orderDetails:o,amount:r}=e;const n=(0,m.Zp)(),[a,i]=(0,j.useState)(!0),s=()=>i(!1);return(0,t.jsx)("div",{children:(0,t.jsxs)(A.A,{open:a,onClose:s,maxWidth:"xs",fullWidth:!0,sx:{"& .MuiPaper-root":{padding:"8px",borderRadius:"16px"}},children:[(0,t.jsx)(P,{children:"Complete Your Payment"}),(0,t.jsx)(B.A,{children:(0,t.jsx)("p",{children:"Ensure your payment details are correct before proceeding."})}),(0,t.jsxs)(D.A,{style:{display:"flex",justifyContent:"flex-end"},children:[(0,t.jsx)(N.A,{style:{textTransform:"none",color:"black"},onClick:s,children:"Cancel"}),(0,t.jsx)(N.A,{onClick:async()=>{var e;if(!await(e="https://checkout.razorpay.com/v1/checkout.js",new Promise((o=>{const r=document.createElement("script");r.src=e,r.onload=()=>o(!0),r.onerror=()=>o(!1),document.body.appendChild(r)}))))return void alert("Failed to load Razorpay SDK. Please check your internet connection.");if(!window.Razorpay)return void alert("Razorpay SDK is not available. Try reloading the page.");console.log(o);const r={key:v.tz||"",amount:o.data.amount,currency:o.data.currency,order_id:o.data.id,handler:async e=>{try{await(0,y.KF)({orderId:e.razorpay_order_id,paymentId:e.razorpay_payment_id,signature:e.razorpay_signature}),alert("Payment Successful"),n("/")}catch(o){alert("Payment verification failed. Please try again.")}}};new window.Razorpay(r).open()},variant:"contained",style:{background:p.A.firstColor,fontSize:"18px",textTransform:"none",border:"solid 1px white"},sx:{padding:"2px 10px",transition:"all 0.4s ease","&:hover":{paddingRight:"20px"}},children:"Proceed to Pay"})]})]})})},T="Best Western Ashoka",F="Lakdi ka pool",O=4.3,Y=130,_="27 Feb 25",E="2:00 PM",M="27 Feb 25",K="5:00 PM",L="3 Hours",G="1 Room, 2 Guests",H="700.00",V="Superior Double Room",X=g.Ik({name:g.Yj().required("Name is required"),email:g.Yj().email("Invalid email").optional()}),q=()=>{var e;const o=null===(e=(0,m.zy)().state)||void 0===e?void 0:e.phoneNumber,[r,n]=(0,j.useState)({});console.log(r),(0,j.useEffect)((()=>{(0,y.$p)(o.slice(2)).then((e=>{var o;n(null===e||void 0===e||null===(o=e.data)||void 0===o?void 0:o.data)})).catch((e=>{console.log(e)}))}),[]);const[g,v]=(0,j.useState)(null),A=async()=>{try{const e=parseFloat(H)||0,o=e+200;if(console.log("Total Amount before payment:",o),0===o)return void alert("Booking amount cannot be zero.");const r={amount:o,currency:"INR"};console.log("Payload sent to createOrder:",r);const n=await(0,y.fS)(r);console.log("Payment Response:",n),null!==n&&void 0!==n&&n.data?v(n.data):alert("Payment failed. Please try again.")}catch(e){console.error("Error during payment:",e),alert("Payment failed. Please try again.")}},w=(0,f.Wx)({initialValues:{name:(null===r||void 0===r?void 0:r.userName)||"",email:(null===r||void 0===r?void 0:r.email)||""},validationSchema:X,enableReinitialize:!0,onSubmit:e=>{const n={userName:e.name,email:e.email,phoneNumber:o.slice(2),isVerified:!0};null===(null===r||void 0===r?void 0:r.data)?((0,y.l4)(n).then((e=>{console.log(e)})).catch((e=>{(0,b.oR)(e)})),A()):A()}});return(0,t.jsxs)(i.A,{sx:{...h.VX,background:"#f6f6f6",mt:0,py:4,px:{xs:1,md:3},display:"flex",flexDirection:{xs:"column",md:"row"},justifyContent:"center",gap:"20px"},children:[(0,t.jsx)(s.A,{sx:{p:1,background:"white",maxWidth:"700px",border:"none",boxShadow:0,borderRadius:"12px"},children:(0,t.jsxs)(l.A,{children:[(0,t.jsx)(d.A,{variant:"h6",gutterBottom:!0,sx:{color:p.A.firstColor,fontWeight:"bold"},children:"Your Booking Summary"}),(0,t.jsxs)(i.A,{sx:{display:"flex",flexDirection:{xs:"column",md:"row"},gap:{xs:0,md:2},position:"relative",mt:2},children:[(0,t.jsx)(c.A,{component:"img",sx:{width:{xs:"100%",md:"250px"},borderRadius:"12px"},image:"https://s3.ap-south-1.amazonaws.com/huts4u.shop/room-image+1.jpg"}),(0,t.jsxs)("div",{children:[(0,t.jsx)(d.A,{sx:{fontSize:"20px",fontWeight:600,color:p.A.firstColor,mt:{xs:1.5,md:1},display:"-webkit-box",overflow:"hidden",textOverflow:"ellipsis",WebkitLineClamp:1,WebkitBoxOrient:"vertical"},children:T}),(0,t.jsx)(d.A,{sx:{fontFamily:"CustomFontSB",fontSize:{xs:"12px",md:"14px"},display:"-webkit-box",overflow:"hidden",textOverflow:"ellipsis",WebkitLineClamp:1,WebkitBoxOrient:"vertical"},children:F}),(0,t.jsxs)(i.A,{sx:{position:"absolute",top:4,right:6,justifyContent:"center",alignItems:"center",gap:"6px"},children:[(0,t.jsxs)(d.A,{variant:"body2",fontWeight:600,color:p.A.thirdColor,sx:{background:p.A.background,px:1,borderRadius:"4px",fontSize:"18px",display:"flex",justifyContent:"center",alignItems:"center"},children:[O," ",(0,t.jsx)(a,{})]}),(0,t.jsxs)(d.A,{variant:"body2",fontWeight:600,color:p.A.firstColor,lineHeight:1,sx:{fontSize:"10px",background:"white",mt:.5,p:.5,borderRadius:"4px"},children:["(",Y," reviews)"]})]}),(0,t.jsxs)("div",{style:{marginTop:"10px",display:"flex",flexWrap:"wrap",flexDirection:"column",gap:"4px"},children:[(0,t.jsxs)(d.A,{sx:J,children:[(0,t.jsx)("strong",{children:"Check-In:"})," ",_,","," ",E]}),(0,t.jsxs)(d.A,{sx:J,children:[(0,t.jsx)("strong",{children:"Check-Out:"})," ",M,","," ",K]}),(0,t.jsxs)(d.A,{sx:J,children:[(0,t.jsx)("strong",{children:"Duration: "}),L]}),(0,t.jsxs)(d.A,{sx:J,children:[(0,t.jsx)("strong",{children:"Room Type:"})," ",V]}),(0,t.jsxs)(d.A,{sx:J,children:[(0,t.jsx)("strong",{children:"Room Info: "}),G]})]})]})]}),(0,t.jsxs)("form",{onSubmit:w.handleSubmit,children:[(0,t.jsx)(d.A,{variant:"h6",mt:4,sx:{color:p.A.firstColor,fontWeight:"bold"},children:"Guest Information"}),(0,t.jsx)(h.XY,{label:"Guest Name",name:"name",fullWidth:!0,margin:"normal",value:w.values.name,onChange:w.handleChange,onBlur:w.handleBlur,error:w.touched.name&&Boolean(w.errors.name)}),(0,t.jsx)(h.XY,{label:"Email Address (Optional)",name:"email",fullWidth:!0,margin:"normal",value:w.values.email,onChange:w.handleChange,onBlur:w.handleBlur,error:w.touched.email&&Boolean(w.errors.email)}),(0,t.jsx)(u.A,{variant:"contained",color:"primary",fullWidth:!0,sx:{mt:2},type:"submit",children:"Pay Now"}),g&&(0,t.jsx)(I,{orderDetails:g,amount:H})]})]})}),(0,t.jsx)(s.A,{sx:{p:1,background:"white",border:"none",boxShadow:0,borderRadius:"12px",height:"fit-content"},children:(0,t.jsxs)(l.A,{children:[(0,t.jsx)(d.A,{variant:"h6",gutterBottom:!0,sx:{color:p.A.firstColor,fontWeight:"bold"},children:"Your Bil Summary"}),(0,t.jsxs)("div",{style:{marginTop:"10px",display:"flex",flexWrap:"wrap",flexDirection:"column",gap:"4px"},children:[(0,t.jsxs)(d.A,{sx:J,children:[(0,t.jsx)("strong",{children:"Room price: "}),"\u20b9",H]}),(0,t.jsxs)(d.A,{sx:J,children:[(0,t.jsx)("strong",{children:"Service Charges: "}),"\u20b9200.00"]}),(0,t.jsx)(x.A,{sx:{my:2}}),(0,t.jsxs)(d.A,{variant:"h6",sx:{color:p.A.firstColor,fontWeight:"bold",lineHeight:1},children:["Total price: \u20b9",Number(H)+200,".00 ",(0,t.jsx)("br",{}),(0,t.jsx)("span",{style:{fontSize:"12px",fontWeight:"normal"},children:"incl. of all taxes"})]})]})]})})]})},J={borderRadius:"52px",boxShadow:"4px 4px 10px rgba(104, 39, 184, 0.17)",color:p.A.firstColor,background:"white",fontSize:{xs:"12px",md:"14px"},width:"fit-content",p:1,px:2,mb:1}},9995:(e,o,r)=>{r.d(o,{$p:()=>s,AJ:()=>t,KF:()=>l,fS:()=>d,l4:()=>i,vJ:()=>a});var n=r(9628);function t(e){return n.Sn.post("/auth/send-otp",e)}function a(e){return n.Sn.post("/auth/verify-otp",e)}function i(e){return n.Sn.post("/auth/create",e)}function s(e){return n.Sn.get("/User/search-one-record",{params:{phoneNumber:e}})}function l(e){return n.Sn.post("/razorpay/verify",e)}function d(e){return n.Sn.post("/razorpay/orders",e)}}}]);
//# sourceMappingURL=706.3399b9ad.chunk.js.map